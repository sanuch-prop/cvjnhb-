<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>Вход — RideNow</title>
  <style>
    :root{
      /* палитра/стек — как раньше */
      --glass-1: rgba(14,21,26,.55);
      --glass-2: rgba(14,21,26,.35);
      --ink:#f3f7ff; --muted:#c4ceda; --stroke:rgba(255,255,255,.18);
      --accent:#ffb668; --accent-2:#9de9d7;

      /* симметричные гуттеры: минимум 14px, на больших — шире */
      --gutter-inline: clamp(14px, 4vw, 24px);
      --gutter-block: 12px;

      --font:15px;
      --maxw: 640px;

      /* безопасные зоны iOS/Android */
      --safe-top: env(safe-area-inset-top, 0px);
      --safe-bottom: env(safe-area-inset-bottom, 0px);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      color:var(--ink);
      font:500 var(--font)/1.25 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.55) 35%, rgba(0,0,0,.45) 60%, rgba(0,0,0,.55)),
        url("image.png") center/cover no-repeat fixed;
      -webkit-text-size-adjust:100%;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;

      /* ВАЖНО: даём странице скролл — карточку больше не сжимаем */
      overflow:auto;
    }

    /* Центрируем карточку в «покойном» состоянии */
    .app{
      min-height:100svh;                    /* стабильная высота без «скачков» */
      display:flex; align-items:center; justify-content:center;
      padding-inline:var(--gutter-inline);
      padding-top:calc(var(--gutter-block) + var(--safe-top));
      padding-bottom:calc(var(--gutter-block) + var(--safe-bottom));
    }
    /* Когда открыта клавиатура: выравниваем вверх, чтобы было привычнее */
    body.kbd-open .app{ align-items:flex-start; }

    /* Карточка: ширина = доступная область → симметричные отступы */
    .card{
      width:100%;
      max-width:var(--maxw);
      border-radius:22px;
      border:1px solid var(--stroke);
      background:linear-gradient(180deg,var(--glass-1),var(--glass-2));
      box-shadow:0 24px 60px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.25);
      backdrop-filter: blur(16px) saturate(140%);
      padding:12px;
    }

    .topbar{display:flex; align-items:center; justify-content:space-between; min-height:36px; padding:2px 4px}
    .brand{display:flex;align-items:center;gap:8px;font-weight:900;opacity:.95}
    .brand .dot{width:8px;height:8px;border-radius:999px;background:#58e0ff;display:inline-block}

    .langs{display:flex;gap:6px}
    .lang-btn{
      min-width:44px; height:30px; padding:0 10px;
      border-radius:12px; border:1px solid var(--stroke);
      background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.04));
      color:var(--ink); font-weight:800; cursor:pointer;
      box-shadow:inset 0 1px 0 rgba(255,255,255,.25);
    }
    .lang-btn.is-active,
    .lang-btn[aria-pressed="true"]{
      border:none; color:#0b0f12;
      background:linear-gradient(180deg,var(--accent),var(--accent-2));
      box-shadow:0 10px 20px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.6);
    }

    /* Контент: обычный поток, без внутреннего overflow */
    .content{display:flex; flex-direction:column; gap:10px}

    h1{margin:4px 0 6px; font-size:26px; text-align:center}

    .social{display:grid;gap:8px;margin-top:2px}
    .sbtn{
      display:flex;align-items:center;gap:10px;justify-content:center;
      border:1px solid var(--stroke); border-radius:12px; padding:10px 12px;
      background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.03));
      color:var(--ink); font-weight:800; cursor:pointer;
      box-shadow:inset 0 1px 0 rgba(255,255,255,.25);
    }
    .icon{width:16px;height:16px;border-radius:4px;background:#fff;display:inline-block}
    .icon.g{background:#fff url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path fill="%234285F4" d="M24 9.5c3.2 0 6.1 1.1 8.4 3.2l6.3-6.3C34.8 2.3 29.7 0 24 0 14.6 0 6.5 5.4 2.5 13.3l7.4 5.7C12 13.4 17.5 9.5 24 9.5z"/><path fill="%2334A853" d="M46.5 24.5c0-1.6-.2-3.1-.6-4.5H24v9h12.7c-.6 3-2.4 5.6-5.1 7.3л7.9 6.1c4.6-4.2 7-10.4 7-17.9z"/><path fill="%23FBBC05" d="M9.9 28.9c-.5-1.5-.8-3.1-.8-4.9s.3-3.4.8-4.9Л2.5 13.3C.9 16.6 0 20.2 0 24c0 3.8.9 7.4 2.5 10.7л7.4-5.8z"/><path fill="%23EA4335" d="M24 48c6.5 0 12-2.1 16.1-5.8л-7.9-6.1c-2.2 1.5-5.1 2.4-8.2 2.4-6.5 0-12-3.9-14-9.1л-7.4 5.8C6.5 42.6 14.6 48 24 48z"/></svg>') center/cover no-repeat}
    .icon.a{background:#000}
    .sep{margin:0;color:var(--muted);text-align:center}

    .field{margin:6px 0}
    .input{
      width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--stroke);
      background:rgba(255,255,255,.08); color:var(--ink); font-weight:700; font-size:16px; outline:none;
    }
    .input::placeholder{color:rgba(243,247,255,.85)}
    .input:focus{box-shadow:0 0 0 2px rgba(255,255,255,.18) inset}

    .helpers{display:flex;justify-content:space-between;align-items:center;margin:4px 0;color:var(--muted);gap:10px}
    .helpers a{color:#ffd59b;text-decoration:none;white-space:nowrap}
    .switch{display:inline-flex;align-items:center;gap:10px;cursor:pointer;user-select:none}
    .switch input{position:absolute;opacity:0;pointer-events:none}
    .track{
      width:42px;height:24px;border-radius:999px; border:1px solid var(--stroke);
      background:linear-gradient(180deg,rgba(255,255,255,.10),rgba(255,255,255,.04));
      position:relative; transition:.2s; box-shadow:inset 0 1px 0 rgba(255,255,255,.25);
    }
    .thumb{
      position:absolute;top:2px;left:2px;width:20px;height:20px;border-radius:999px;background:#fff;transition:.2s;
      box-shadow:0 2px 6px rgba(0,0,0,.35);
    }
    .switch input:checked + .track{background:linear-gradient(180deg,var(--accent),var(--accent-2))}
    .switch input:checked + .track .thumb{left:20px;background:#0b0f12}

    /* Стики-кнопка: всегда видна над клавиатурой */
    .cta-stick{
      position:sticky;
      bottom:calc(var(--safe-bottom) + 12px);
      z-index:10;
      padding-top:4px; /* микрозазор над кнопкой при прилипаниях */
      background:linear-gradient(to top, rgba(11,15,18,.35), rgba(11,15,18,0)); /* лёгкий фейд сверху */
      border-radius:12px;
      backdrop-filter:saturate(120%);
    }
    .cta{
      width:100%; padding:12px 16px; border:none; cursor:pointer; border-radius:14px; font-weight:900;
      background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#0b0f12;
      box-shadow:0 10px 22px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.6);
    }

    .foot{
      margin-top:6px; padding:10px 12px; border:1px solid var(--stroke); border-radius:12px;
      background:linear-gradient(180deg,rgba(255,255,255,.07),rgba(255,255,255,.03));
      color:var(--muted); text-align:center; line-height:1.2;
    }
    .foot a{color:#ffd59b;text-decoration:none}
    .bottom{margin-top:6px;color:var(--muted);text-align:center}
    .bottom a{color:#ffd59b;text-decoration:none}

    /* Компактные высоты */
    @media (max-height: 640px){
      :root{ --font:14px }
      h1{font-size:24px}
      .sbtn,.input{padding:9px 11px}
      .cta{padding:11px 14px}
      .langs{gap:4px}
      .lang-btn{min-width:40px;height:28px}
    }
  </style>
</head>
<body>
  <main class="app">
    <section class="card" role="dialog" aria-labelledby="title" id="card">
      <div class="topbar">
        <div class="brand"><span class="dot"></span><span>RideNow</span></div>
        <div class="langs" role="tablist" aria-label="Выбор языка">
          <button class="lang-btn" data-lang="ru" aria-pressed="false">RU</button>
          <button class="lang-btn" data-lang="uk" aria-pressed="false">UA</button>
          <button class="lang-btn" data-lang="en" aria-pressed="false">EN</button>
        </div>
      </div>

      <form class="content" id="loginForm" novalidate>
        <h1 id="title">Вход</h1>

        <div class="social" aria-label="Войти через">
          <button class="sbtn" type="button" id="googleBtn"><span class="icon g"></span>Войти через Google</button>
          <button class="sbtn" type="button" id="appleBtn"><span class="icon a"></span>Войти через Apple</button>
        </div>

        <div class="sep">или по email</div>

        <label class="field" for="email">
          <input id="email" class="input" type="email" placeholder="email@example.com"
                 autocomplete="email" inputmode="email" required>
        </label>
        <label class="field" for="pass">
          <input id="pass" class="input" type="password" placeholder="Пароль"
                 autocomplete="current-password" required>
        </label>

        <div class="helpers">
          <label class="switch">
            <input id="remember" type="checkbox" checked>
            <span class="track"><span class="thumb"></span></span>
            <span>Запомнить меня</span>
          </label>
          <a href="#" id="restoreLink">Забыли пароль?</a>
        </div>

        <!-- Стики-кнопка -->
        <div class="cta-stick">
          <button class="cta" type="submit" id="loginBtn">Войти</button>
        </div>

        <div class="foot">
          Нажимая «Войти», вы принимаете <a href="#" id="termsLink">Условия</a> и <a href="#" id="policyLink">Политику</a>.
        </div>
        <div class="bottom">Нет аккаунта? <a href="#" id="createLink">Создать</a></div>
      </form>
    </section>
  </main>

  <script>
    const $ = s => document.querySelector(s), $$ = s => document.querySelectorAll(s);

    /* Язык */
    const langBtns = $$('.lang-btn');
    function setLang(code){
      langBtns.forEach(b => {
        const on = b.dataset.lang === code;
        b.classList.toggle('is-active', on);
        b.setAttribute('aria-pressed', on ? 'true' : 'false');
      });
      try{ localStorage.setItem('ridenow_lang', code); }catch(e){}
      document.documentElement.lang = code || 'ru';
    }
    setLang(localStorage.getItem('ridenow_lang') || 'ru');
    langBtns.forEach(b => b.addEventListener('click', () => setLang(b.dataset.lang)));

    /* Навигация: только passenger-* */
    const goPassengerProfile = () => location.href = 'passenger-profile.html';
    const goRegister         = () => location.href = 'passenger-register.html';
    const goRestore          = () => location.href = 'passenger-restore.html';
    const goTerms            = () => location.href = 'passenger-terms.html';
    const goPolicy           = () => location.href = 'passenger-policy.html';

    /* Сабмит формы */
    const form = $('#loginForm'); let submitting = false;
    form.addEventListener('submit', (e) => {
      e.preventDefault(); if (submitting) return; submitting = true;
      if ($('#remember')?.checked) { try{ localStorage.setItem('remember_me','1'); }catch(e){} }
      else                         { try{ localStorage.removeItem('remember_me'); }catch(e){} }
      goPassengerProfile();
    });

    $('#restoreLink')?.addEventListener('click', e => { e.preventDefault(); goRestore(); });
    $('#createLink') ?.addEventListener('click', e => { e.preventDefault(); goRegister(); });
    $('#termsLink')  ?.addEventListener('click', e => { e.preventDefault(); goTerms(); });
    $('#policyLink') ?.addEventListener('click', e => { e.preventDefault(); goPolicy(); });

    /* Соцлогин (демо) — сразу в passenger-profile */
    function openAuth(provider){
      // имитация логина без модалки — UX быстрее
      setTimeout(goPassengerProfile, 600);
    }
    $('#googleBtn')?.addEventListener('click', ()=>openAuth('Google'));
    $('#appleBtn') ?.addEventListener('click', ()=>openAuth('Apple'));

    /* Маркер открытой клавиатуры: меняем вертикальное выравнивание */
    window.addEventListener('focusin', e => {
      if (e.target.matches('input, textarea, [contenteditable="true"]')){
        document.body.classList.add('kbd-open');
      }
    });
    window.addEventListener('focusout', e => {
      // если больше нет фокуса на инпутах — снимаем флаг
      setTimeout(()=>{
        if (!document.querySelector('input:focus, textarea:focus, [contenteditable="true"]:focus')){
          document.body.classList.remove('kbd-open');
        }
      }, 50);
    });

    /* Автопрокрутка к фокусу — мягко, без «скачков» */
    $$('.input').forEach(el=>{
      el.addEventListener('focus', ()=>{
        setTimeout(()=>{ el.scrollIntoView({block:'center', behavior:'smooth'}); }, 60);
      });
    });
  </script>
</body>
</html>
